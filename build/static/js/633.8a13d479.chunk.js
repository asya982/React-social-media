"use strict";(self.webpackChunksocial_media=self.webpackChunksocial_media||[]).push([[633],{9633:function(e,s,n){n.r(s),n.d(s,{default:function(){return D}});var a=n(8687),t=n(7781),i=n(1548),r=n(5628),c=n(3115),o=n(1413),u=n(9439),l=n(2791),g=n(1087),m="Dialog_dialog__5HDuH",d="Dialog_active__RnDaX",f=n(184),h=function(e){var s=e.selectUser;(0,l.useEffect)((function(){s(e.location)}),[e.location,s]);return(0,f.jsxs)("div",{className:m,children:[(0,f.jsx)("img",{src:e.img,alt:e.name,className:"avatar"}),(0,f.jsx)(g.OL,{to:"/dialogs/"+e.id,className:function(e){return e.isActive?d:null},children:e.name})]})},_={Dialogs:"Dialogs_Dialogs__nrSsY",messages:"Dialogs_messages__Cg2l+",sendMessage:"Dialogs_sendMessage__p+Z4w",typing:"Dialogs_typing__Y25X6"},p="Message_message__rjHQQ",j=function(e){return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:p,"data-sentby":e.sentBy,children:[(0,f.jsx)("p",{children:e.sentBy}),e.message]})})},x=n(9195),v=function(e){var s=(0,x.cI)(),n=s.register,a=s.handleSubmit,t=s.reset;(0,l.useEffect)((function(){t()}),[e.location,t]);return(0,f.jsxs)("form",{onSubmit:a((function(s){var n=s.messageText;n.trim()&&(e.sendMessage(n),t())})),className:_.sendMessage,children:[(0,f.jsx)("textarea",(0,o.Z)({},n("messageText",{onChange:e.isTyping}))),(0,f.jsx)("button",{children:"Send"})]})},y=function(e){var s=(0,l.useState)(!1),n=(0,u.Z)(s,2),a=n[0],t=n[1],i=(0,l.useState)(0),r=(0,u.Z)(i,2),c=r[0],g=r[1];(0,l.useEffect)((function(){t(!1)}),[e.messagesPage.location]);var m=e.messagesPage.dialogsData.map((function(s){return(0,l.createElement)(h,(0,o.Z)((0,o.Z)({},s),{},{key:s.id,location:e.router.params["*"],selectUser:e.selectUser}))})),d=e.messagesPage.location?e.messagesPage.messageData.filter((function(s,n){return n+1===+e.messagesPage.location}))[0].map((function(e,s){return(0,f.jsx)(j,{message:e.message,sentBy:e.sentBy},s)})):null;return(0,f.jsxs)("div",{className:_.Dialogs,children:[(0,f.jsx)("section",{className:_.dialog_items,children:m}),(0,f.jsxs)("section",{className:_.messages,children:[d,a&&(0,f.jsx)("span",{className:_.typing,children:"typing..."}),(0,f.jsx)(v,{sendMessage:e.sendMessage,location:e.messagesPage.location,isTyping:function(){clearTimeout(c),t(!0),g(setTimeout((function(){return t(!1)}),1e3))}})]})]})},D=(0,t.qC)(r.E,(0,a.$j)((function(e){return{messagesPage:e.messagesPage}}),{selectUser:c.dy,sendMessage:c.bG}),i.D)(y)},1548:function(e,s,n){n.d(s,{D:function(){return d}});var a=n(1413),t=n(5671),i=n(3144),r=n(136),c=n(516),o=n(2791),u=n(8687),l=n(7689),g=n(184),m=function(e){return{isAuth:e.auth.isAuth}},d=function(e){var s=function(s){(0,r.Z)(o,s);var n=(0,c.Z)(o);function o(){return(0,t.Z)(this,o),n.apply(this,arguments)}return(0,i.Z)(o,[{key:"render",value:function(){return this.props.isAuth?(0,g.jsx)(e,(0,a.Z)({},this.props)):(0,g.jsx)(l.Fg,{to:"/login"})}}]),o}(o.Component);return(0,u.$j)(m)(s)}}}]);
//# sourceMappingURL=633.8a13d479.chunk.js.map